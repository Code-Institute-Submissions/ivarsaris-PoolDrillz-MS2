{% extends 'base.html' %}
{% block title %} Edit {{ exercise.name }} {% endblock %}
{% block content %}

<section>
    <div class="container">
        <div class="row">
            <h1>Edit exercise</h1>
            <form action="{{ url_for('update_exercise', exercise_id=exercise._id) }}" enctype="multipart/form-data" method='POST' class="col s12 col m8">
                <div class="row">
                <!-- name as input because it's a short text -->
                    <div class="input-field col s12">
                        <input id="name" name="name" type="text" class="validate" value="{{exercise.name}}">
                        <label for="name">Exercise name</label>
                    </div>
                </div>
                <div class="row">
                <!-- description as text area because user might need to give a long explanation -->
                    <div class="input-field col s12">
                        <textarea id="description" name="description" class="materialize-textarea" value="{{exercise.description}}">{{exercise.description}}</textarea>
                        <label for="description">Exercise description</label>
                    </div>
                </div>
                <div class="row">
                    <!-- each type of exercise checkbox has an if statement. If this value exists in database, the box is checked. -->
                    <div class="col s6 m4 l2">
                        <p>
                            <label>
                                <input type="checkbox" name="type_of_exercise" value="Technique" {% if 'Technique' in exercise.type_of_exercise %}checked {% endif %} />
                                <span>Technique</span>
                            </label>
                        </p>
                    </div>
                    <div class="col s6 m4 l2">
                        <p>
                            <label>
                                <input type="checkbox" name="type_of_exercise" value="Cue ball control" {% if 'Cue ball control' in exercise.type_of_exercise %}checked {% endif %} />
                                <span>Cue ball control</span>
                            </label>
                        </p>
                    </div>
                    <div class="col s6 m4 l2">
                        <p>
                            <label>
                                <input type="checkbox" name="type_of_exercise" value="Potting ability" {% if 'Potting ability' in exercise.type_of_exercise %}checked {% endif %}/>
                                <span>Potting ability</span>
                            </label>
                        </p>
                    </div>
                    <div class="col s6 m4 l2">
                        <p>
                            <label>
                                <input type="checkbox" name="type_of_exercise" value="Concentration" {% if 'Concentration' in exercise.type_of_exercise %}checked {% endif %} />
                                <span>Concentration</span>
                            </label>
                        </p>
                    </div>
                    <div class="col s6 m4 l2">
                        <p>
                            <label>
                                <input type="checkbox" name="type_of_exercise" value="Safeties" {% if 'Safeties' in exercise.type_of_exercise %}checked {% endif %} />
                                <span>Safeties</span>
                            </label>
                        </p>
                    </div>
                    <div class="col s6 m4 l2">
                        <p>
                            <label>
                                <input type="checkbox" name="type_of_exercise" value="Kicks" {% if 'Kicks' in exercise.type_of_exercise %}checked {% endif %}/>
                                <span>Kicks</span>
                            </label>
                        </p>
                    </div>
                    <div class="col s6 m4 l2">
                        <p>
                            <label>
                                <input type="checkbox" name="type_of_exercise" value="Banks" {% if 'Banks' in exercise.type_of_exercise %}checked {% endif %}/>
                                <span>Banks</span>
                            </label>
                        </p>
                    </div>
                    <div class="col s6 m4 l2">
                        <p>
                            <label>
                                <input type="checkbox" name="type_of_exercise" value="8-ball" {% if '8-ball' in exercise.type_of_exercise %}checked {% endif %}/>
                                <span>8-ball</span>
                            </label>
                        </p>
                    </div>
                    <div class="col s6 m4 l2">
                        <p>
                            <label>
                                <input type="checkbox" name="type_of_exercise" value="9-ball" {% if '9-ball' in exercise.type_of_exercise %}checked {% endif %}/>
                                <span>9-ball</span>
                            </label>
                        </p>
                    </div>
                    <div class="col s6 m4 l2">
                        <p>
                            <label>
                                <input type="checkbox" name="type_of_exercise" value="10-ball" {% if '10-ball' in exercise.type_of_exercise %}checked {% endif %}/>
                                <span>10-ball</span>
                            </label>
                        </p>
                    </div>
                    <div class="col s6 m4 l2">
                        <p>
                            <label>
                                <input type="checkbox" name="type_of_exercise" value="Straight pool" {% if 'Straight pool' in exercise.type_of_exercise %}checked {% endif %}/>
                                <span>Straight pool</span>
                            </label>
                        </p>
                    </div>
                    <div class="col s6 m4 l2">
                        <p>
                            <label>
                                <input type="checkbox" name="type_of_exercise" value="Special skills" {% if 'Special skills' in exercise.type_of_exercise %}checked {% endif %}/>
                                <span>Special skills</span>
                            </label>
                        </p>
                    </div>
                </div>
                <div class="row">
                    <!-- each skill level has if statement, if this value is in database, it's selected -->
                    <div class="input-field col s12">
                        <select id="skill_level" name="skill_level" value="{{exercise.skill_level}}">
                            <option value="Beginner" {% if exercise.skill_level=='beginner' %} selected {%endif%}>Beginner</option>
                            <option value="Intermediate" {% if exercise.skill_level=='Intermediate' %} selected {%endif%}>Intermediate</option>
                            <option value="Intermediate/Experienced" {% if exercise.skill_level=='Intermediate/Experienced' %} selected {%endif%}>Intermediate/Experienced</option>
                            <option value="Experienced" {% if exercise.skill_level=='Experienced' %} selected {%endif%}>Experienced</option>
                            <option value="Professional" {% if exercise.skill_level=='Professional' %} selected {%endif%}>Professional</option>
                        </select>
                        <label>Difficulty level</label>
                    </div>
                </div>
                <div class="row">
                <!-- current image is shown. This way, if the user doesn't add a new image, the old one is
                saved to the database again. -->
                    {% if exercise.image %}
                    <img class="small-img" src="{{exercise.image}}"> 
                    {% else %}
                    <img class="small-img" src="/static/images/noimage.jpg" alt="no exercise image found"> 
                    {% endif %}
                    <div class="file-field input-field">
                        <div class="btn waves-effect waves-light">
                            Change Image<i class="material-icons right">file_upload</i>
                            <input type="file" name="image" value="{{exercise.image}}">
                        </div>
                        <div class="file-path-wrapper">
                            <input class="file-path validate" type="text">
                        </div>
                    </div>
                </div>
                <div class="row">
                <!-- date added as string notation. In stats page, this number is taken. The highest number is the most
                recently added exercise. -->
                    <div class="input-field col s12">
                        <input id="date_added" name="date_added" type="text" class="validate" value="{{exercise.date_added}}">
                        <label for="date_added">Date(DD.MM.YYYY)</label>
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s12">
                        <input id="exercise_added_by" name="exercise_added_by" type="text" class="validate" value="{{exercise.exercise_added_by}}">
                        <label for="exercise_added_by">Exercise added by</label>
                    </div>
                </div>
                <div class="row col s12 l6 add-cancel-button">
                <!-- button submits the exercise with all the changes to the database. -->
                    <div>
                        <button class="btn waves-effect waves-light" type="submit">Update {{exercise.name}}
                            <i class="material-icons right">update</i></button>
                    </div>
                </div>
                <div class="row col s12 l6 add-cancel-button">
                <!-- button cancels the changes to the exercise. User is returned to exercises overview.
                The exercises keeps its original values. -->
                    <div>
                        <div class="btn waves-effect waves-light cancel-button"><a href={{ url_for( 'exercises') }}>Cancel
										update<i class="material-icons right">cancel</i></a></div>
                    </div>
                </div>
            </form>
            <div class="col s12">
                <h3>Danger Zone!</h3>
                <!-- pop up message to confirm deleting exercise from the database -->
                <a href="{{url_for('delete_exercise', exercise_id=exercise._id)}}" title="delete" class="delete waves-effect waves-light btn red" onclick="return confirm('Are you sure you want to delete this exercise from the database?')">Delete
					exercise<i class="material-icons right">delete_forever</i></a>
            </div>
        </div>
    </div>
</section>
{% endblock %}